<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>WebVR - Aframe - VR walkthrough</title>
    <meta name="description" content="WebVR - Aframe - VR walkthrough">
    <meta name="author" content="Kumar Ahir - VR Designer">
    <link rel="stylesheet" href="css/format.css" type="text/css">
    <link rel="stylesheet" href="css/styles.min.css" type="text/css">
  
  </head>
  <body>
    <div class="utilBarWrap">
    <aside id="sidebar3"><div id="image-64065" class="widget image container"><a href="/" target="_self"><img src="https://d3w216np43fnr4.cloudfront.net/5936/64065/1.jpg?version=1491245641"></a></div><div class="sign-up">
<span class="loggedout"><a href="/user/register/">Sign Up</a> | </span>
<span class="loggedout"><a href="/user/">Log In</a></span>
<span class="loggedin"><a href="/user/">Account</a></span>
</div><div id="codewidget-61469" class="widget code codewidget container">Grantham: <a href="tel:6034483278">603.863.3278</a> â€¢ Lebanon / Hanover: <a href="tel:6034483278">603.448.3278</a><p></p></div><div id="sociallinks-61472" class="widget sociallinks socialinkswidget flat container"><h3 class="widget-title">Social Media Links</h3><ul class="fa-social-links sm40"><li><a target="_blank" title="Facebook" href="https://www.facebook.com/ShepRealty" class="fa-social-links fsml-facebook" rel="noopener"><i class="fa fa-facebook" aria-hidden="true"></i><span class="sr-only">Facebook</span></a></li><li><a target="_blank" title="Linkedin" href="https://www.linkedin.com/company/cg-shepherd-realty-llc" class="fa-social-links fsml-linkedin" rel="noopener"><i class="fa fa-linkedin" aria-hidden="true"></i><span class="sr-only">Linkedin</span></a></li><li><a target="_blank" title="Twitter" href="https://twitter.com/CarolShepRealty" class="fa-social-links fsml-twitter" rel="noopener"><i class="fa fa-twitter" aria-hidden="true"></i><span class="sr-only">Twitter</span></a></li></ul></div><div id="menuwidget-61471" class="widget menu menuwidget default-nav container"><h3 class="widget-title">Main Navigation</h3><div class="widget-inner"><div class="desktop-nav"><div class="navbar-wrapper"><nav class="navbar navbar-default" role="navigation"><div id="navbar-61471"><ul class="nav navbar-nav site-nav"><li role="presentation" class=" menu-item-103459"><a href="https://sheprealty.com/real-estate/search/" target="_self">Search Listings</a></li><li role="presentation" class=" menu-item-103667"><a href="https://sheprealty.com/listings/our-listings/" target="_self">Our Listings</a></li><li role="presentation" class=" menu-item-103461"><a href="http://www.eastmanpremierrentals.com/" target="_blank" rel="noopener">Rentals</a></li><li role="presentation" class="has-children menu-item-105444"><a href="#" target="_self" rel="noopener" data-toggle="dropdown" data-target="sub-menu-105444" class="dropdown-toggle">Services<span class="caret"></span></a><ul class="dropdown-menu" id="sub-menu-105444" role="menu"><li role="presentation" class=" menu-item-103466"><a href="https://sheprealty.com/buyers/" target="_self">Buyer Services</a></li><li role="presentation" class=" menu-item-103467"><a href="https://sheprealty.com/sellers/" target="_self">Seller Services</a></li><li role="presentation" class=" menu-item-103468"><a href="https://sheprealty.com/rentals/real-estate-rental-services/" target="_self">Rental Services</a></li><li role="presentation" class=" menu-item-105445"><a href="https://sheprealty.com/area-info/" target="_self">Area Info</a></li><li role="presentation" class=" menu-item-103470"><a href="https://sheprealty.com/home/nh-property-tax-rates/" target="_self">NH Property Tax Rates</a></li><li role="presentation" class=" menu-item-103471"><a href="https://sheprealty.com/home/local-schools-dartmouth-lake-sunapee-region/" target="_self">Local Schools</a></li></ul></li><li role="presentation" class=" menu-item-103463"><a href="https://sheprealty.com/our-agents/" target="_self">Our Agents</a></li><li role="presentation" class=" menu-item-103464"><a href="https://sheprealty.com/blog/" target="_self">Blog</a></li><li role="presentation" class=" menu-item-103465"><a href="https://sheprealty.com/contact-us/" target="_self">Contact</a></li></ul></div></nav></div></div><div class="mobile-nav"><button type="button" class="navbar-toggle" data-target="#navbar-mobile-61471"><span>Menu</span><span class="fa fa-bar" aria-hidden="true"></span><span class="fa fa-bar" aria-hidden="true"></span><span class="fa fa-bar" aria-hidden="true"></span></button><div class="navbar-wrapper"><nav class="navbar navbar-default" role="navigation"><div id="navbar-mobile-61471"><a href="#" class="menu-close"><i class="fa fa-times-circle-o" aria-hidden="true"></i><span class="sr-only">Close Button</span></a><div class="menu-sign-on"><a class="usm-btn nav-login" href="/user/login/" rel="nofollow">Log In</a><a class="usm-btn nav-register" href="/user/register/" rel="nofollow">Sign Up</a><a class="usm-btn nav-account" href="/user/" rel="nofollow">My Account</a></div><ul class="nav navbar-nav site-nav"><li role="presentation" class=" menu-item-103459"><a href="https://sheprealty.com/real-estate/search/" target="_self">Search Listings</a></li><li role="presentation" class=" menu-item-103667"><a href="https://sheprealty.com/listings/our-listings/" target="_self">Our Listings</a></li><li role="presentation" class=" menu-item-103461"><a href="http://www.eastmanpremierrentals.com/" target="_blank" rel="noopener">Rentals</a></li><li role="presentation" class="has-children menu-item-105444"><a href="#" target="_self" rel="noopener" data-toggle="dropdown" data-target="mobile-sub-menu-105444" class="dropdown-toggle">Services<span class="caret"></span></a><ul class="dropdown-menu" id="mobile-sub-menu-105444" role="menu"><li role="presentation" class=" menu-item-103466"><a href="https://sheprealty.com/buyers/" target="_self">Buyer Services</a></li><li role="presentation" class=" menu-item-103467"><a href="https://sheprealty.com/sellers/" target="_self">Seller Services</a></li><li role="presentation" class=" menu-item-103468"><a href="https://sheprealty.com/rentals/real-estate-rental-services/" target="_self">Rental Services</a></li><li role="presentation" class=" menu-item-105445"><a href="https://sheprealty.com/area-info/" target="_self">Area Info</a></li><li role="presentation" class=" menu-item-103470"><a href="https://sheprealty.com/home/nh-property-tax-rates/" target="_self">NH Property Tax Rates</a></li><li role="presentation" class=" menu-item-103471"><a href="https://sheprealty.com/home/local-schools-dartmouth-lake-sunapee-region/" target="_self">Local Schools</a></li></ul></li><li role="presentation" class=" menu-item-103463"><a href="https://sheprealty.com/our-agents/" target="_self">Our Agents</a></li><li role="presentation" class=" menu-item-103464"><a href="https://sheprealty.com/blog/" target="_self">Blog</a></li><li role="presentation" class=" menu-item-103465"><a href="https://sheprealty.com/contact-us/" target="_self">Contact</a></li></ul><ul class="nav navbar-nav user-nav"><li class="menu-item-saved-search" role="presentation"><a href="/realestate/searches/" rel="nofollow">Saved Searches</a></li><li class="menu-item-favorites" role="presentation"><a href="/realestate/favorites/view/" rel="nofollow">Favorites</a></li></ul></div></nav></div></div></div></div></aside>
</div>

    <hr>
    <div class="container">


  <div class="virtual">  
    <h1 >
      <span class="blue"> Shephard Realty's </span> Virtual Walkthrough
    </h1>
</div>
 
  <section class="address">
    <h1>  609 Otter rd</h1>
    <h2> Grantham, NH </h2>
  </section>
      

<script>
  window.onload( localStorage.setItem("current360image", "609_Otter_Rd/2k/outsideFrontDoor_2k.jpg"))
  
         function select360Image(elem){
              var grabbedName = elem;            
              localStorage.setItem("current360image", grabbedName);
              document.querySelector('canvas').remove();
               threeJS();
           }

</script>
  
 <section class="layout">
   
  
          <div class="layout-1"> 
            <span class="609_Otter_Rd/2k/loft1_2k.jpg" onclick="select360Image(this.className)">  <img class="waypoint-loft" src="images/marker_ylw.png"></span>
          </div >
        <div class=" layout-2">   
          <span  class="609_Otter_Rd/2k/deck_2k.jpg" onclick="select360Image(this.className)" > <img class="waypoint-deck" src="images/marker_ylw.png"></span>
          <span class="609_Otter_Rd/2k/masterBedroom1_2k.jpg" onclick="select360Image(this.className)">  <img class="waypoint-masterBedroom1" src="images/marker_ylw.png"> </span>
          <span class="609_Otter_Rd/2k/masterBedroom2_2k.jpg" onclick="select360Image(this.className)"> <img class="waypoint-masterBedroom2" src="images/marker_ylw.png"> </span>
          <span class="609_Otter_Rd/2k/masterBath1_2k.jpg" onclick="select360Image(this.className)"> <img class="waypoint-masterBath2 " src="images/marker_ylw.png"></span>
          <span class="609_Otter_Rd/2k/livingroom3_2k.jpg" onclick="select360Image(this.className)"> <img class="waypoint-livingRoom" src="images/marker_ylw.png"></span>
          <span class="609_Otter_Rd/2k/livingRoom_2k.jpg" onclick="select360Image(this.className)"> <img class="waypoint-livingRoom2" src="images/marker_ylw.png"> </span>
          <span class="609_Otter_Rd/2k/foyer_2k.jpg" onclick="select360Image(this.className)"> <img class="waypoint-foyer" src="images/marker_ylw.png"> </span>
          <span class="609_Otter_Rd/2k/outsideFrontDoor_2k.jpg" onclick="select360Image(this.className)"> <img class="waypoint-front" src="images/marker_ylw.png"> </span>

 
      </div>
      <div class=" layout-3"> </div>
     
<hr>


<div id="embedded360">
  <span> <h1> <img class="_360" src="images/360icon.png">
    image
    </h1>
  <h3>
    | Click/tap and drag to scroll around the 360 image and view the surrounding environment
  </h3> </span>
  <div id="container_360">
  </div>
 
  <script src="js/three.min.js"></script>   

  <script>
   function threeJS(){
    var camera, scene, renderer;

    var isUserInteracting = false,
    onMouseDownMouseX = 0, onMouseDownMouseY = 0,
    lon = 0, onMouseDownLon = 0,
    lat = 0, onMouseDownLat = 0,
    phi = 0, theta = 0;

    init();
    animate();

    function init() {

      var container, mesh;

      container = document.getElementById( 'container_360' );

      camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1100 );
      camera.target = new THREE.Vector3( 0, 0, 0 );

      scene = new THREE.Scene();

      var geometry = new THREE.SphereGeometry( 500, 60, 40 );
      geometry.scale( - 1, 1, 1 );
      

      var material = new THREE.MeshBasicMaterial( {
            map: new THREE.TextureLoader().load(localStorage.getItem('current360image'))
      } );
      
      mesh = new THREE.Mesh( geometry, material );

      scene.add( mesh );

      renderer = new THREE.WebGLRenderer();
      renderer.setPixelRatio( window.devicePixelRatio );
      renderer.setSize( window.innerWidth * .7, window.innerHeight * .77 );
      container.appendChild( renderer.domElement );

      document.addEventListener( 'mousedown', onDocumentMouseDown, false );
      document.addEventListener( 'mousemove', onDocumentMouseMove, false );
      document.addEventListener( 'mouseup', onDocumentMouseUp, false );
      document.addEventListener( 'mousewheel', onDocumentMouseWheel, false );
      document.addEventListener( 'MozMousePixelScroll', onDocumentMouseWheel, false);

      //

      document.addEventListener( 'dragover', function ( event ) {

        event.preventDefault();
        event.dataTransfer.dropEffect = 'copy';

      }, false );

      document.addEventListener( 'dragenter', function ( event ) {
        document.body.style.opacity = 0.5;
      }, false );

      document.addEventListener( 'dragleave', function ( event ) {
        document.body.style.opacity = 1;

      }, false );

      document.addEventListener( 'drop', function ( event ) {
        event.preventDefault();

        var reader = new FileReader();
        reader.addEventListener( 'load', function ( event ) {

          material.map.image.src = event.target.result;
          material.map.needsUpdate = true;

        }, false );
        reader.readAsDataURL( event.dataTransfer.files[ 0 ] );
        document.body.style.opacity = 1;
      }, false );

      window.addEventListener( 'resize', onWindowResize, false );
    }

    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();

      renderer.setSize( window.innerWidth * .7, window.innerHeight * .77 );
    }

    function onDocumentMouseDown( event ) {

      event.preventDefault();

      isUserInteracting = true;

      onPointerDownPointerX = event.clientX;
      onPointerDownPointerY = event.clientY;

      onPointerDownLon = lon;
      onPointerDownLat = lat;
    }

    function onDocumentMouseMove( event ) {
      if ( isUserInteracting === true ) {
        lon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;
        lat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;
      }
    }

    function onDocumentMouseUp( event ) {
      isUserInteracting = false;
    }

    function onDocumentMouseWheel( event ) {
      // WebKit

      if ( event.wheelDeltaY ) {
        camera.fov -= event.wheelDeltaY * 0.05;

      // Opera / Explorer 9

      } else if ( event.wheelDelta ) {
        camera.fov -= event.wheelDelta * 0.05;

      // Firefox

      } else if ( event.detail ) {
        camera.fov += event.detail * 1.0;
      }

      camera.updateProjectionMatrix();
    }

    function animate() {
      requestAnimationFrame( animate );
      update();
    }

    function update() {
      if ( isUserInteracting === false ) {
        lon += 0.005;
      }

      lat = Math.max( - 85, Math.min( 85, lat ) );
      phi = THREE.Math.degToRad( 90 - lat );
      theta = THREE.Math.degToRad( lon );

      camera.target.x = 500 * Math.sin( phi ) * Math.cos( theta );
      camera.target.y = 500 * Math.cos( phi );
      camera.target.z = 500 * Math.sin( phi ) * Math.sin( theta );

      camera.lookAt( camera.target );

      /*
      // distortion
      camera.position.copy( camera.target ).negate();
      */

      renderer.render( scene, camera );
    }
   }
    
  window.onload( threeJS());
    </script>
       
    
      </div>
  </section>
  
</div>


  
    </div>
  </body>
</html>